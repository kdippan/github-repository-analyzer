<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Repository Analyzer</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&family=Fira+Code:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <style>
        :root {
            /* Modern Color Scheme */
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --accent: #ec4899;
            --background: #0f172a;
            --surface: #1e293b;
            --text: #f8fafc;
            --text-secondary: #94a3b8;
            --border: rgba(148, 163, 184, 0.2);
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --glass: rgba(30, 41, 59, 0.8);
            --glass-border: rgba(148, 163, 184, 0.15);
            
            /* Gradients */
            --gradient-primary: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --gradient-secondary: linear-gradient(135deg, #ec4899 0%, #f43f5e 100%);
            --gradient-bg: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
            --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.12);
            
            /* Transitions */
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--gradient-bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-logo {
            font-size: 3rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 2rem;
            animation: pulse 2s infinite;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(99, 102, 241, 0.3);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        .loading-progress {
            width: 300px;
            height: 4px;
            background: rgba(99, 102, 241, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            width: 0%;
            animation: progress 2s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes progress {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        /* Glass Morphism Effects */
        .glass {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            box-shadow: var(--shadow-glass);
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 1rem 2rem;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            background: rgba(15, 23, 42, 0.9);
            border-bottom: 1px solid var(--glass-border);
        }

        .nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .theme-toggle, .auth-btn {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            color: var(--text);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .theme-toggle:hover, .auth-btn:hover {
            background: rgba(30, 41, 59, 1);
            transform: translateY(-1px);
        }

        /* Main Content */
        .main {
            margin-top: 80px;
            padding: 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Search Section */
        .search-section {
            margin-bottom: 3rem;
        }

        .search-container {
            background: var(--glass);
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
        }

        .search-title {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .search-form {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .search-input {
            flex: 1;
            padding: 1rem;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 1rem;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .search-btn {
            padding: 1rem 2rem;
            background: var(--gradient-primary);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .search-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .examples {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
        }

        .example-btn {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.3);
            color: var(--primary);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.875rem;
            transition: var(--transition);
        }

        .example-btn:hover {
            background: rgba(99, 102, 241, 0.2);
        }

        /* Dashboard Tabs */
        .tabs {
            display: flex;
            background: var(--glass);
            border-radius: 12px;
            padding: 0.5rem;
            margin-bottom: 2rem;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 8px;
            transition: var(--transition);
            font-weight: 500;
            min-width: max-content;
        }

        .tab.active {
            background: var(--gradient-primary);
            color: white;
        }

        .tab:hover:not(.active) {
            background: rgba(99, 102, 241, 0.1);
            color: var(--text);
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--glass);
            padding: 1.5rem;
            border-radius: 16px;
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
        }

        .card-value {
            font-size: 2rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .card-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Chart Container */
        .chart-container {
            background: var(--glass);
            padding: 1.5rem;
            border-radius: 16px;
            margin-bottom: 1.5rem;
        }

        .chart-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-align: center;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
        }

        /* Repository Info */
        .repo-info {
            background: var(--glass);
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
        }

        .repo-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .repo-avatar {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            border: 2px solid var(--primary);
        }

        .repo-name {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .repo-description {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .repo-stats {
            display: flex;
            gap: 2rem;
            margin-bottom: 1rem;
        }

        .repo-stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
        }

        .repo-topics {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .topic {
            background: rgba(99, 102, 241, 0.2);
            color: var(--primary);
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }

        /* Data Table */
        .data-table {
            background: var(--glass);
            border-radius: 16px;
            overflow: hidden;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .table th {
            background: rgba(30, 41, 59, 0.5);
            font-weight: 600;
            color: var(--text-secondary);
        }

        .table tr:hover {
            background: rgba(99, 102, 241, 0.05);
        }

        /* Limitations Panel */
        .limitations {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .limitations-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            cursor: pointer;
        }

        .limitations-icon {
            color: var(--warning);
        }

        .limitations-title {
            font-weight: 600;
            color: var(--warning);
        }

        .limitations-content {
            display: none;
        }

        .limitations-content.show {
            display: block;
        }

        .limitations-list {
            list-style: none;
            space-y: 0.5rem;
        }

        .limitations-list li {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        /* Footer */
        .footer {
            background: var(--glass);
            padding: 2rem;
            margin-top: 3rem;
            border-radius: 16px;
            text-align: center;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1rem;
        }

        .footer-link {
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-link:hover {
            color: var(--secondary);
        }

        .rate-limit {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Loading States */
        .skeleton {
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
            background-size: 200% 100%;
            animation: skeleton 1.5s infinite;
            border-radius: 8px;
            height: 1rem;
        }

        @keyframes skeleton {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Error States */
        .error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }

        .error-icon {
            font-size: 3rem;
            color: var(--error);
            margin-bottom: 1rem;
        }

        .error-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--error);
            margin-bottom: 0.5rem;
        }

        .error-message {
            color: var(--text-secondary);
        }

        /* Success States */
        .success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .success-icon {
            color: var(--success);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                padding: 1rem;
            }

            .nav {
                flex-direction: column;
                gap: 1rem;
            }

            .main {
                padding: 1rem;
                margin-top: 120px;
            }

            .search-form {
                flex-direction: column;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .repo-stats {
                flex-direction: column;
                gap: 1rem;
            }

            .footer-links {
                flex-direction: column;
                gap: 1rem;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                text-align: center;
            }
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .gap-2 { gap: 0.5rem; }
        .gap-4 { gap: 1rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .text-center { text-align: center; }
        .text-sm { font-size: 0.875rem; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--surface);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-logo">GitHub Analyzer</div>
        <div class="loading-spinner"></div>
        <div class="loading-progress">
            <div class="loading-progress-bar"></div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="logo">
                <span class="material-icons">analytics</span>
                GitHub Analyzer
            </div>
            <div class="nav-actions">
                <button class="theme-toggle" id="themeToggle">
                    <span class="material-icons">dark_mode</span>
                    Dark
                </button>
                <button class="auth-btn" id="authBtn">
                    <span class="material-icons">key</span>
                    Add Token
                </button>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Search Section -->
        <section class="search-section" data-aos="fade-up">
            <div class="search-container">
                <h1 class="search-title">Analyze GitHub Repository</h1>
                <form class="search-form" id="searchForm">
                    <input 
                        type="url" 
                        class="search-input" 
                        id="repoUrl"
                        placeholder="Enter GitHub repository URL (e.g., https://github.com/facebook/react)"
                        required
                    >
                    <button type="submit" class="search-btn" id="analyzeBtn">
                        <span class="material-icons">search</span>
                        Analyze
                    </button>
                </form>
                <div class="examples">
                    <button class="example-btn" data-url="https://github.com/facebook/react">facebook/react</button>
                    <button class="example-btn" data-url="https://github.com/microsoft/vscode">microsoft/vscode</button>
                    <button class="example-btn" data-url="https://github.com/vercel/next.js">vercel/next.js</button>
                    <button class="example-btn" data-url="https://github.com/tensorflow/tensorflow">tensorflow/tensorflow</button>
                </div>
            </div>

            <!-- Limitations Panel -->
            <div class="limitations">
                <div class="limitations-header" id="limitationsToggle">
                    <span class="material-icons limitations-icon">info</span>
                    <span class="limitations-title">API Limitations & Information</span>
                    <span class="material-icons">expand_more</span>
                </div>
                <div class="limitations-content" id="limitationsContent">
                    <ul class="limitations-list">
                        <li>
                            <span class="material-icons text-sm">schedule</span>
                            <span>Rate limits: 60 requests/hour (unauthenticated), 5000/hour (with token)</span>
                        </li>
                        <li>
                            <span class="material-icons text-sm">folder</span>
                            <span>Directory listings limited to 1,000 files via API</span>
                        </li>
                        <li>
                            <span class="material-icons text-sm">lock</span>
                            <span>Private repositories require authentication token</span>
                        </li>
                        <li>
                            <span class="material-icons text-sm">storage</span>
                            <span>Large repositories may require pagination for complete data</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="resultsSection" class="hidden">
            <!-- Dashboard Tabs -->
            <div class="tabs" data-aos="fade-up">
                <button class="tab active" data-tab="overview">Overview</button>
                <button class="tab" data-tab="commits">Commits</button>
                <button class="tab" data-tab="contributors">Contributors</button>
                <button class="tab" data-tab="issues">Issues & PRs</button>
                <button class="tab" data-tab="files">Files</button>
                <button class="tab" data-tab="analytics">Analytics</button>
            </div>

            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <div id="repoInfo" class="repo-info" data-aos="fade-up">
                    <!-- Repository info will be populated here -->
                </div>

                <div class="cards-grid" data-aos="fade-up" data-aos-delay="100">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <span class="material-icons">star</span>
                            </div>
                            <div class="card-title">Stars</div>
                        </div>
                        <div class="card-value" id="starsCount">-</div>
                        <div class="card-label">GitHub Stars</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <span class="material-icons">call_split</span>
                            </div>
                            <div class="card-title">Forks</div>
                        </div>
                        <div class="card-value" id="forksCount">-</div>
                        <div class="card-label">Repository Forks</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <span class="material-icons">visibility</span>
                            </div>
                            <div class="card-title">Watchers</div>
                        </div>
                        <div class="card-value" id="watchersCount">-</div>
                        <div class="card-label">Watching Users</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <span class="material-icons">bug_report</span>
                            </div>
                            <div class="card-title">Issues</div>
                        </div>
                        <div class="card-value" id="issuesCount">-</div>
                        <div class="card-label">Open Issues</div>
                    </div>
                </div>

                <div class="chart-container" data-aos="fade-up" data-aos-delay="200">
                    <h3 class="chart-title">Language Distribution</h3>
                    <div class="chart-wrapper">
                        <canvas id="languageChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Commits Tab -->
            <div id="commits" class="tab-content">
                <div class="chart-container" data-aos="fade-up">
                    <h3 class="chart-title">Commit Activity Timeline</h3>
                    <div class="chart-wrapper">
                        <canvas id="commitsChart"></canvas>
                    </div>
                </div>

                <div class="data-table" data-aos="fade-up" data-aos-delay="100">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Author</th>
                                <th>Message</th>
                                <th>SHA</th>
                            </tr>
                        </thead>
                        <tbody id="commitsTable">
                            <!-- Commits will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Contributors Tab -->
            <div id="contributors" class="tab-content">
                <div class="chart-container" data-aos="fade-up">
                    <h3 class="chart-title">Top Contributors</h3>
                    <div class="chart-wrapper">
                        <canvas id="contributorsChart"></canvas>
                    </div>
                </div>

                <div class="cards-grid" id="contributorsGrid" data-aos="fade-up" data-aos-delay="100">
                    <!-- Contributors cards will be populated here -->
                </div>
            </div>

            <!-- Issues & PRs Tab -->
            <div id="issues" class="tab-content">
                <div class="cards-grid" data-aos="fade-up">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <span class="material-icons">error_outline</span>
                            </div>
                            <div class="card-title">Open Issues</div>
                        </div>
                        <div class="card-value" id="openIssuesCount">-</div>
                        <div class="card-label">Currently Open</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <span class="material-icons">check_circle</span>
                            </div>
                            <div class="card-title">Closed Issues</div>
                        </div>
                        <div class="card-value" id="closedIssuesCount">-</div>
                        <div class="card-label">Recently Closed</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <span class="material-icons">merge_type</span>
                            </div>
                            <div class="card-title">Pull Requests</div>
                        </div>
                        <div class="card-value" id="pullRequestsCount">-</div>
                        <div class="card-label">Open PRs</div>
                    </div>
                </div>

                <div class="data-table" data-aos="fade-up" data-aos-delay="100">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Title</th>
                                <th>State</th>
                                <th>Author</th>
                                <th>Created</th>
                            </tr>
                        </thead>
                        <tbody id="issuesTable">
                            <!-- Issues will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Files Tab -->
            <div id="files" class="tab-content">
                <div class="data-table" data-aos="fade-up">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Type</th>
                                <th>Size</th>
                                <th>Last Modified</th>
                            </tr>
                        </thead>
                        <tbody id="filesTable">
                            <!-- Files will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="chart-container" data-aos="fade-up">
                    <h3 class="chart-title">Repository Health Score</h3>
                    <div class="cards-grid">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <span class="material-icons">health_and_safety</span>
                                </div>
                                <div class="card-title">Health Score</div>
                            </div>
                            <div class="card-value" id="healthScore">-</div>
                            <div class="card-label">Overall Rating</div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <span class="material-icons">trending_up</span>
                                </div>
                                <div class="card-title">Activity Level</div>
                            </div>
                            <div class="card-value" id="activityLevel">-</div>
                            <div class="card-label">Recent Activity</div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <span class="material-icons">people</span>
                                </div>
                                <div class="card-title">Community</div>
                            </div>
                            <div class="card-value" id="communityScore">-</div>
                            <div class="card-label">Engagement Score</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-links">
            <a href="https://docs.github.com/rest" class="footer-link" target="_blank">GitHub API Docs</a>
            <a href="https://github.com" class="footer-link" target="_blank">GitHub</a>
            <a href="#" class="footer-link">About</a>
        </div>
        <div class="rate-limit">
            <span class="material-icons text-sm">schedule</span>
            <span id="rateLimitInfo">Rate limit: Loading...</span>
        </div>
        <p style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.875rem;">
            Built with ❤️ for developers | Powered by GitHub API
        </p>
    </footer>

    <script>
        // Global variables
        let currentRepo = null;
        let charts = {};
        let apiToken = null;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Initialize AOS
            AOS.init({
                duration: 800,
                easing: 'ease-in-out',
                once: true
            });

            // Hide loading screen after 2.5 seconds
            setTimeout(() => {
                const loadingScreen = document.getElementById('loadingScreen');
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            }, 2500);

            // Setup event listeners
            setupEventListeners();
            
            // Check for stored API token
            apiToken = localStorage.getItem('github_token');
            updateAuthButton();
            
            // Update rate limit info
            updateRateLimit();
        }

        function setupEventListeners() {
            // Search form
            document.getElementById('searchForm').addEventListener('submit', handleSearch);
            
            // Example buttons
            document.querySelectorAll('.example-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const url = e.target.getAttribute('data-url');
                    document.getElementById('repoUrl').value = url;
                    handleSearch({ preventDefault: () => {} });
                });
            });

            // Tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    switchTab(e.target.getAttribute('data-tab'));
                });
            });

            // Theme toggle
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            
            // Auth button
            document.getElementById('authBtn').addEventListener('click', handleAuth);
            
            // Limitations toggle
            document.getElementById('limitationsToggle').addEventListener('click', toggleLimitations);
        }

        async function handleSearch(e) {
            e.preventDefault();
            
            const url = document.getElementById('repoUrl').value;
            const analyzeBtn = document.getElementById('analyzeBtn');
            
            if (!isValidGitHubUrl(url)) {
                showError('Please enter a valid GitHub repository URL');
                return;
            }

            const { owner, repo } = parseGitHubUrl(url);
            
            // Update UI
            analyzeBtn.disabled = true;
            analyzeBtn.innerHTML = '<span class="material-icons">hourglass_empty</span>Analyzing...';
            
            try {
                await analyzeRepository(owner, repo);
                document.getElementById('resultsSection').classList.remove('hidden');
                document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
            } catch (error) {
                showError(`Analysis failed: ${error.message}`);
            } finally {
                analyzeBtn.disabled = false;
                analyzeBtn.innerHTML = '<span class="material-icons">search</span>Analyze';
            }
        }

        function isValidGitHubUrl(url) {
            const pattern = /^https:\/\/github\.com\/[^\/]+\/[^\/]+\/?$/;
            return pattern.test(url);
        }

        function parseGitHubUrl(url) {
            const matches = url.match(/github\.com\/([^\/]+)\/([^\/]+)/);
            return {
                owner: matches[1],
                repo: matches[2].replace(/\.git$/, '')
            };
        }

        async function analyzeRepository(owner, repo) {
            try {
                // Fetch repository data
                const repoData = await fetchGitHubAPI(`/repos/${owner}/${repo}`);
                currentRepo = repoData;
                
                // Update repository info
                updateRepositoryInfo(repoData);
                
                // Fetch additional data in parallel
                const [
                    languages,
                    commits,
                    contributors,
                    issues,
                    pullRequests,
                    contents
                ] = await Promise.all([
                    fetchGitHubAPI(`/repos/${owner}/${repo}/languages`),
                    fetchGitHubAPI(`/repos/${owner}/${repo}/commits?per_page=100`),
                    fetchGitHubAPI(`/repos/${owner}/${repo}/contributors?per_page=30`),
                    fetchGitHubAPI(`/repos/${owner}/${repo}/issues?state=all&per_page=50`),
                    fetchGitHubAPI(`/repos/${owner}/${repo}/pulls?state=all&per_page=30`),
                    fetchGitHubAPI(`/repos/${owner}/${repo}/contents`)
                ]);

                // Update all sections
                updateOverviewStats(repoData);
                updateLanguageChart(languages);
                updateCommitsData(commits);
                updateContributorsData(contributors);
                updateIssuesData(issues, pullRequests);
                updateFilesData(contents);
                updateAnalytics(repoData, commits, contributors, issues);
                
                showSuccess('Repository analyzed successfully!');
                
            } catch (error) {
                throw error;
            }
        }

        async function fetchGitHubAPI(endpoint) {
            const headers = {
                'Accept': 'application/vnd.github.v3+json',
                'User-Agent': 'GitHub-Repository-Analyzer'
            };
            
            if (apiToken) {
                headers['Authorization'] = `token ${apiToken}`;
            }
            
            const response = await fetch(`https://api.github.com${endpoint}`, { headers });
            
            if (!response.ok) {
                if (response.status === 403) {
                    throw new Error('Rate limit exceeded. Please add a GitHub token or try again later.');
                } else if (response.status === 404) {
                    throw new Error('Repository not found. Please check the URL.');
                } else {
                    throw new Error(`API Error: ${response.status} - ${response.statusText}`);
                }
            }
            
            // Update rate limit info
            updateRateLimitFromHeaders(response.headers);
            
            return await response.json();
        }

        function updateRepositoryInfo(repo) {
            const repoInfo = document.getElementById('repoInfo');
            const createdDate = new Date(repo.created_at).toLocaleDateString();
            const updatedDate = new Date(repo.updated_at).toLocaleDateString();
            
            repoInfo.innerHTML = `
                <div class="repo-header">
                    <img src="${repo.owner.avatar_url}" alt="${repo.owner.login}" class="repo-avatar">
                    <div>
                        <h2 class="repo-name">${repo.full_name}</h2>
                        <p class="repo-description">${repo.description || 'No description available'}</p>
                    </div>
                </div>
                <div class="repo-stats">
                    <div class="repo-stat">
                        <span class="material-icons">calendar_today</span>
                        Created: ${createdDate}
                    </div>
                    <div class="repo-stat">
                        <span class="material-icons">update</span>
                        Updated: ${updatedDate}
                    </div>
                    <div class="repo-stat">
                        <span class="material-icons">code</span>
                        ${repo.language || 'Mixed'}
                    </div>
                    <div class="repo-stat">
                        <span class="material-icons">storage</span>
                        ${formatBytes(repo.size * 1024)}
                    </div>
                    ${repo.license ? `
                    <div class="repo-stat">
                        <span class="material-icons">gavel</span>
                        ${repo.license.name}
                    </div>
                    ` : ''}
                </div>
                ${repo.topics && repo.topics.length > 0 ? `
                <div class="repo-topics">
                    ${repo.topics.map(topic => `<span class="topic">${topic}</span>`).join('')}
                </div>
                ` : ''}
            `;
        }

        function updateOverviewStats(repo) {
            document.getElementById('starsCount').textContent = formatNumber(repo.stargazers_count);
            document.getElementById('forksCount').textContent = formatNumber(repo.forks_count);
            document.getElementById('watchersCount').textContent = formatNumber(repo.subscribers_count);
            document.getElementById('issuesCount').textContent = formatNumber(repo.open_issues_count);
        }

        function updateLanguageChart(languages) {
            const ctx = document.getElementById('languageChart').getContext('2d');
            
            if (charts.language) {
                charts.language.destroy();
            }

            const labels = Object.keys(languages);
            const data = Object.values(languages);
            const total = data.reduce((sum, value) => sum + value, 0);
            
            const colors = [
                '#6366f1', '#8b5cf6', '#ec4899', '#f43f5e', 
                '#ef4444', '#f59e0b', '#eab308', '#84cc16',
                '#22c55e', '#10b981', '#14b8a6', '#06b6d4'
            ];

            charts.language = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors.slice(0, labels.length),
                        borderWidth: 2,
                        borderColor: '#1e293b'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#f8fafc',
                                padding: 20,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(30, 41, 59, 0.9)',
                            titleColor: '#f8fafc',
                            bodyColor: '#f8fafc',
                            borderColor: '#6366f1',
                            borderWidth: 1,
                            callbacks: {
                                label: (context) => {
                                    const percentage = ((context.parsed / total) * 100).toFixed(1);
                                    return `${context.label}: ${percentage}%`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateCommitsData(commits) {
            // Update commits chart
            const ctx = document.getElementById('commitsChart').getContext('2d');
            
            if (charts.commits) {
                charts.commits.destroy();
            }

            // Group commits by date
            const commitsByDate = {};
            commits.forEach(commit => {
                const date = new Date(commit.commit.author.date).toDateString();
                commitsByDate[date] = (commitsByDate[date] || 0) + 1;
            });

            const dates = Object.keys(commitsByDate).slice(-30); // Last 30 days
            const commitCounts = dates.map(date => commitsByDate[date]);

            charts.commits = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates.map(date => new Date(date).toLocaleDateString()),
                    datasets: [{
                        label: 'Commits',
                        data: commitCounts,
                        borderColor: '#6366f1',
                        backgroundColor: 'rgba(99, 102, 241, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#f8fafc' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#94a3b8' },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' }
                        },
                        y: {
                            ticks: { color: '#94a3b8' },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' }
                        }
                    }
                }
            });

            // Update commits table
            const commitsTable = document.getElementById('commitsTable');
            commitsTable.innerHTML = commits.slice(0, 20).map(commit => `
                <tr>
                    <td>${new Date(commit.commit.author.date).toLocaleDateString()}</td>
                    <td>${commit.commit.author.name}</td>
                    <td style="max-width: 300px; overflow: hidden; text-overflow: ellipsis;">
                        ${commit.commit.message.split('\n')[0]}
                    </td>
                    <td>
                        <code style="font-family: 'Fira Code', monospace; font-size: 0.75rem;">
                            ${commit.sha.substring(0, 7)}
                        </code>
                    </td>
                </tr>
            `).join('');
        }

        function updateContributorsData(contributors) {
            // Update contributors chart
            const ctx = document.getElementById('contributorsChart').getContext('2d');
            
            if (charts.contributors) {
                charts.contributors.destroy();
            }

            const topContributors = contributors.slice(0, 10);
            
            charts.contributors = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: topContributors.map(c => c.login),
                    datasets: [{
                        label: 'Contributions',
                        data: topContributors.map(c => c.contributions),
                        backgroundColor: 'rgba(99, 102, 241, 0.8)',
                        borderColor: '#6366f1',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#f8fafc' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#94a3b8' },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' }
                        },
                        y: {
                            ticks: { color: '#94a3b8' },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' }
                        }
                    }
                }
            });

            // Update contributors grid
            const contributorsGrid = document.getElementById('contributorsGrid');
            contributorsGrid.innerHTML = contributors.slice(0, 6).map(contributor => `
                <div class="card">
                    <div class="card-header">
                        <img src="${contributor.avatar_url}" alt="${contributor.login}" 
                             style="width: 40px; height: 40px; border-radius: 8px;">
                        <div>
                            <div class="card-title">${contributor.login}</div>
                            <div class="card-label">${contributor.contributions} contributions</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateIssuesData(issues, pullRequests) {
            const openIssues = issues.filter(issue => issue.state === 'open' && !issue.pull_request);
            const closedIssues = issues.filter(issue => issue.state === 'closed' && !issue.pull_request);
            const openPRs = pullRequests.filter(pr => pr.state === 'open');

            document.getElementById('openIssuesCount').textContent = formatNumber(openIssues.length);
            document.getElementById('closedIssuesCount').textContent = formatNumber(closedIssues.length);
            document.getElementById('pullRequestsCount').textContent = formatNumber(openPRs.length);

            // Update issues table
            const issuesTable = document.getElementById('issuesTable');
            const combinedItems = [...issues.slice(0, 10), ...pullRequests.slice(0, 10)]
                .sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

            issuesTable.innerHTML = combinedItems.slice(0, 20).map(item => `
                <tr>
                    <td>
                        <span class="material-icons text-sm">
                            ${item.pull_request ? 'merge_type' : 'error_outline'}
                        </span>
                        ${item.pull_request ? 'PR' : 'Issue'}
                    </td>
                    <td style="max-width: 250px; overflow: hidden; text-overflow: ellipsis;">
                        ${item.title}
                    </td>
                    <td>
                        <span class="status status--${item.state === 'open' ? 'success' : 'info'}">
                            ${item.state}
                        </span>
                    </td>
                    <td>${item.user.login}</td>
                    <td>${new Date(item.created_at).toLocaleDateString()}</td>
                </tr>
            `).join('');
        }

        function updateFilesData(contents) {
            const filesTable = document.getElementById('filesTable');
            
            filesTable.innerHTML = contents.map(item => `
                <tr>
                    <td>
                        <div class="flex items-center gap-2">
                            <span class="material-icons text-sm">
                                ${item.type === 'dir' ? 'folder' : 'description'}
                            </span>
                            ${item.name}
                        </div>
                    </td>
                    <td>
                        <span class="status status--${item.type === 'dir' ? 'info' : 'success'}">
                            ${item.type === 'dir' ? 'Directory' : 'File'}
                        </span>
                    </td>
                    <td>${item.size ? formatBytes(item.size) : '-'}</td>
                    <td>-</td>
                </tr>
            `).join('');
        }

        function updateAnalytics(repo, commits, contributors, issues) {
            // Calculate health score based on various factors
            let healthScore = 0;
            
            // Recent activity (last 30 days)
            const recentCommits = commits.filter(commit => {
                const commitDate = new Date(commit.commit.author.date);
                const thirtyDaysAgo = new Date();
                thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
                return commitDate > thirtyDaysAgo;
            }).length;
            
            healthScore += Math.min(recentCommits * 2, 30); // Max 30 points for activity
            
            // Community engagement
            const stars = repo.stargazers_count;
            const forks = repo.forks_count;
            healthScore += Math.min(Math.log10(stars + 1) * 10, 25); // Max 25 points for stars
            healthScore += Math.min(Math.log10(forks + 1) * 8, 20); // Max 20 points for forks
            
            // Documentation
            if (repo.has_wiki) healthScore += 5;
            if (repo.description) healthScore += 5;
            
            // Issues management
            const issueRatio = issues.length > 0 ? 
                issues.filter(i => i.state === 'closed').length / issues.length : 1;
            healthScore += issueRatio * 15; // Max 15 points for issue management
            
            healthScore = Math.min(Math.round(healthScore), 100);

            // Activity level
            const activityLevel = recentCommits > 20 ? 'High' : 
                                recentCommits > 5 ? 'Medium' : 'Low';
            
            // Community score
            const communityScore = Math.min(Math.round((stars + forks) / 100), 100);

            document.getElementById('healthScore').textContent = healthScore + '%';
            document.getElementById('activityLevel').textContent = activityLevel;
            document.getElementById('communityScore').textContent = communityScore + '%';
        }

        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
        }

        function toggleTheme() {
            const themeToggle = document.getElementById('themeToggle');
            const icon = themeToggle.querySelector('.material-icons');
            const text = themeToggle.querySelector('span:last-child');
            
            if (document.body.classList.contains('light-theme')) {
                document.body.classList.remove('light-theme');
                icon.textContent = 'dark_mode';
                text.textContent = 'Dark';
            } else {
                document.body.classList.add('light-theme');
                icon.textContent = 'light_mode';
                text.textContent = 'Light';
            }
        }

        function handleAuth() {
            const token = prompt('Enter your GitHub Personal Access Token:\n\nThis will be stored locally to increase rate limits from 60 to 5000 requests per hour.');
            
            if (token) {
                localStorage.setItem('github_token', token);
                apiToken = token;
                updateAuthButton();
                updateRateLimit();
                showSuccess('GitHub token added successfully! Rate limit increased.');
            }
        }

        function updateAuthButton() {
            const authBtn = document.getElementById('authBtn');
            if (apiToken) {
                authBtn.innerHTML = '<span class="material-icons">check</span>Token Added';
                authBtn.style.background = 'rgba(16, 185, 129, 0.2)';
                authBtn.style.borderColor = 'rgba(16, 185, 129, 0.3)';
                authBtn.style.color = '#10b981';
            }
        }

        async function updateRateLimit() {
            try {
                const response = await fetchGitHubAPI('/rate_limit');
                const remaining = response.rate.remaining;
                const total = response.rate.limit;
                
                document.getElementById('rateLimitInfo').textContent = 
                    `Rate limit: ${remaining}/${total} requests remaining`;
            } catch (error) {
                document.getElementById('rateLimitInfo').textContent = 'Rate limit: Unable to fetch';
            }
        }

        function updateRateLimitFromHeaders(headers) {
            const remaining = headers.get('X-RateLimit-Remaining');
            const total = headers.get('X-RateLimit-Limit');
            
            if (remaining && total) {
                document.getElementById('rateLimitInfo').textContent = 
                    `Rate limit: ${remaining}/${total} requests remaining`;
            }
        }

        function toggleLimitations() {
            const content = document.getElementById('limitationsContent');
            const icon = document.querySelector('#limitationsToggle .material-icons:last-child');
            
            if (content.classList.contains('show')) {
                content.classList.remove('show');
                icon.textContent = 'expand_more';
            } else {
                content.classList.add('show');
                icon.textContent = 'expand_less';
            }
        }

        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success';
            successDiv.innerHTML = `
                <span class="material-icons success-icon">check_circle</span>
                <span>${message}</span>
            `;
            
            document.querySelector('.search-container').appendChild(successDiv);
            
            setTimeout(() => {
                successDiv.remove();
            }, 5000);
        }

        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.innerHTML = `
                <div class="material-icons error-icon">error</div>
                <div class="error-title">Analysis Failed</div>
                <div class="error-message">${message}</div>
            `;
            
            document.querySelector('.search-container').appendChild(errorDiv);
            
            setTimeout(() => {
                errorDiv.remove();
            }, 8000);
        }

        // Utility functions
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    </script>
</body>
</html>

